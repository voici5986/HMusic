# HMusic åŒæ¨¡å¼å¼€å‘æ—¥å¿—

> è®°å½•HMusicåŒæ¨¡å¼åŠŸèƒ½çš„å®Œæ•´å¼€å‘è¿‡ç¨‹ï¼ŒåŒ…æ‹¬æ€è·¯æ¼”è¿›ã€æŠ€æœ¯å†³ç­–å’Œå®ç°ç»†èŠ‚
>
> **å¼€å‘è€…**: å“ˆé›·é…± (ï¿£â–½ï¿£)ï¼
> **å¼€å§‹æ—¥æœŸ**: 2025-11-20
> **ç‰ˆæœ¬**: v1.0

---

## ğŸ“… å¼€å‘æ—¶é—´çº¿

### 2025-11-20 - é¡¹ç›®å¯åŠ¨å’Œæ¶æ„è®¾è®¡

#### ğŸ¯ éœ€æ±‚åˆ†æé˜¶æ®µ

**èƒŒæ™¯**ï¼š
- ç”¨æˆ·å‘ç° xiaomusic é¡¹ç›®éœ€è¦éƒ¨ç½²æœåŠ¡ç«¯ï¼ˆNASæˆ–æœåŠ¡å™¨ï¼‰
- ä¸æ˜¯æ‰€æœ‰ç”¨æˆ·éƒ½æœ‰ NAS/æœåŠ¡å™¨èµ„æº
- å¸Œæœ› HMusic èƒ½æ”¯æŒ"æ— æœåŠ¡å™¨"æ¨¡å¼ï¼Œé™ä½ä½¿ç”¨é—¨æ§›

**æ ¸å¿ƒéœ€æ±‚**ï¼š
1. âœ… ä¿ç•™ç°æœ‰ xiaomusic æ¨¡å¼ï¼ˆæœåŠ¡ç«¯æ¨¡å¼ï¼‰
2. âœ… æ–°å¢ç›´è¿æ¨¡å¼ï¼ˆæ— éœ€æœåŠ¡ç«¯ï¼‰
3. âœ… ä¸¤ç§æ¨¡å¼å…±å­˜ï¼Œç”¨æˆ·å¯è‡ªç”±åˆ‡æ¢
4. âœ… ä¸ç ´åç°æœ‰æ¶æ„å’ŒåŠŸèƒ½

**ç›®æ ‡ç”¨æˆ·ç¾¤ä½“**ï¼š
- **é«˜çº§ç”¨æˆ·**ï¼šæœ‰ NAS/æœåŠ¡å™¨ â†’ ä½¿ç”¨ xiaomusic æ¨¡å¼ï¼ˆåŠŸèƒ½å®Œæ•´ï¼‰
- **æ™®é€šç”¨æˆ·**ï¼šåªæœ‰æ‰‹æœº â†’ ä½¿ç”¨ç›´è¿æ¨¡å¼ï¼ˆç®€åŒ–ä½†å¤Ÿç”¨ï¼‰

---

#### ğŸ” æŠ€æœ¯è°ƒç ”é˜¶æ®µ

**è°ƒç ” xiaomusic å·¥ä½œåŸç†**ï¼š

1. **xiaomusic å¦‚ä½•è®©å°çˆ±éŸ³ç®±æ’­æ”¾æœ¬åœ°éŸ³ä¹ï¼Ÿ**
   ```
   æœ¬åœ°éŸ³ä¹æ–‡ä»¶ â†’ HTTP Server (FastAPI, port 8090)
                â†“
   ç”Ÿæˆå…¬ç½‘å¯è®¿é—®çš„ URL
                â†“
   è°ƒç”¨å°ç±³ IoT API å‘é€æ’­æ”¾æŒ‡ä»¤
                â†“
   å°çˆ±éŸ³ç®±è®¿é—® URL å¹¶æ’­æ”¾
   ```

2. **å…³é”®å‘ç°**ï¼š
   - xiaomusic æœ¬è´¨æ˜¯ä¸€ä¸ª"ä¸­é—´å±‚"
   - æ ¸å¿ƒæ˜¯è°ƒç”¨å°ç±³ IoT Cloud API
   - åªè¦æœ‰éŸ³ä¹ URLï¼Œå°±å¯ä»¥ç›´æ¥è°ƒç”¨ API

3. **å¯è¡Œæ€§ç»“è®º**ï¼š
   - âœ… APP å¯ä»¥ç›´æ¥è°ƒç”¨å°ç±³ IoT API
   - âœ… æ— éœ€ xiaomusic æœåŠ¡ç«¯
   - âœ… HMusic çš„ `UnifiedApiService` å·²ç»è¿”å›å…¬ç½‘å¯è®¿é—®çš„éŸ³ä¹ URL

**å°ç±³ IoT API åˆ†æ**ï¼š

```
ç™»å½•æµç¨‹:
1. GET  https://account.xiaomi.com/pass/serviceLogin?sid=micoapi
   â†’ è·å– _sign å‚æ•°

2. POST https://account.xiaomi.com/pass/serviceLoginAuth2
   Body: {user, hash(MD5), sid, _sign}
   â†’ è·å–è·³è½¬ location URL

3. GET  location URL
   â†’ ä» Cookie æå– serviceToken å’Œ userId

æ’­æ”¾éŸ³ä¹:
POST https://api.mina.mi.com/remote/ubus
Query: ?deviceId=xxx&message=player_play_url&path=mediaplayer
Headers: Cookie: serviceToken=xxx; userId=xxx
Body: {"url": "éŸ³ä¹URL"}
```

**æŠ€æœ¯æ ˆç¡®è®¤**ï¼š
- âœ… Dio (HTTPå®¢æˆ·ç«¯) - å·²æœ‰
- âœ… crypto (MD5åŠ å¯†) - å·²æœ‰
- âœ… SharedPreferences (é…ç½®æŒä¹…åŒ–) - å·²æœ‰
- âœ… Riverpod (çŠ¶æ€ç®¡ç†) - å·²æœ‰
- âœ… GoRouter (è·¯ç”±ç®¡ç†) - å·²æœ‰

**ç»“è®º**ï¼šæ‰€æœ‰ä¾èµ–å·²ç»å­˜åœ¨ï¼Œæ— éœ€æ·»åŠ æ–°ä¾èµ–ï¼(ï¿£â–½ï¿£)ãƒ

---

#### ğŸ—ï¸ æ¶æ„è®¾è®¡é˜¶æ®µ

**è®¾è®¡æ–¹æ¡ˆå¯¹æ¯”**ï¼š

| æ–¹æ¡ˆ | ä¼˜ç‚¹ | ç¼ºç‚¹ | æ˜¯å¦é‡‡ç”¨ |
|------|------|------|---------|
| 1. if-else åˆ¤æ–­æ¨¡å¼ | ç®€å•ç›´æ¥ | è¿åå¼€é—­åŸåˆ™ï¼Œéš¾ä»¥æ‰©å±• | âŒ |
| 2. ç»§æ‰¿ + å¤šæ€ | ç¬¦åˆOOP | ç»§æ‰¿å±‚æ¬¡å¤æ‚ï¼Œè€¦åˆåº¦é«˜ | âŒ |
| 3. ç­–ç•¥æ¨¡å¼ | ç¬¦åˆSOLIDåŸåˆ™ï¼Œæ˜“æ‰©å±• | éœ€è¦å®šä¹‰æ¥å£ | âœ… **é‡‡ç”¨** |

**ç­–ç•¥æ¨¡å¼è®¾è®¡**ï¼š

```dart
// å·²æœ‰çš„æ¥å£ï¼ˆä¸éœ€è¦ä¿®æ”¹ï¼ï¼‰
abstract class PlaybackStrategy {
  Future<void> play();
  Future<void> pause();
  Future<void> playMusic({...});
  // ...
}

// å·²æœ‰çš„å®ç°ï¼ˆä¸éœ€è¦ä¿®æ”¹ï¼ï¼‰
class RemotePlaybackStrategy implements PlaybackStrategy {
  // xiaomusic æ¨¡å¼
}

// æ–°å¢çš„å®ç°ï¼ˆå®Œç¾é›†æˆï¼ï¼‰
class MiIoTDirectPlaybackStrategy implements PlaybackStrategy {
  // ç›´è¿æ¨¡å¼
}
```

**æ¶æ„äº®ç‚¹**ï¼š
1. âœ… **é›¶ç ´åæ€§é›†æˆ** - ä½¿ç”¨ç°æœ‰ `PlaybackStrategy` æ¥å£
2. âœ… **å¼€é—­åŸåˆ™** - å¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­
3. âœ… **å•ä¸€èŒè´£** - æ¯ä¸ªç­–ç•¥åªè´Ÿè´£ä¸€ç§æ’­æ”¾æ–¹å¼
4. âœ… **ä¾èµ–å€’ç½®** - PlaybackProvider ä¾èµ–æŠ½è±¡è€Œéå…·ä½“å®ç°

---

### 2025-11-20 - æ ¸å¿ƒä»£ç å®ç°

#### ğŸ“ æ¨¡å—1: MiIoTService (å°ç±³ IoT æœåŠ¡)

**æ–‡ä»¶**: `lib/data/services/mi_iot_service.dart`

**å®ç°æ€è·¯**ï¼š
1. å°è£…æ‰€æœ‰å°ç±³ IoT API è°ƒç”¨
2. ç®¡ç†ç™»å½•çŠ¶æ€ï¼ˆserviceToken, userIdï¼‰
3. æä¾›ç®€æ´çš„æ¥å£ç»™ä¸Šå±‚è°ƒç”¨

**æ ¸å¿ƒåŠŸèƒ½**ï¼š
```dart
class MiIoTService {
  // ç™»å½•
  Future<bool> login(String account, String password)

  // è·å–è®¾å¤‡åˆ—è¡¨
  Future<List<MiDevice>> getDevices()

  // æ’­æ”¾éŸ³ä¹
  Future<bool> playMusic({
    required String deviceId,
    required String musicUrl,
    bool compatMode = false,
  })

  // æ§åˆ¶æ’­æ”¾
  Future<bool> pause(String deviceId)
  Future<bool> resume(String deviceId)
  Future<bool> stop(String deviceId)
}
```

**å®ç°éš¾ç‚¹**ï¼š

1. **Cookie ç®¡ç†**
   - é—®é¢˜ï¼šéœ€è¦ä» HTTP å“åº”å¤´æå– serviceToken
   - è§£å†³ï¼šä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼è§£æ Set-Cookie å¤´
   ```dart
   final cookies = response.headers['set-cookie'];
   final serviceTokenMatch = RegExp(r'serviceToken=([^;]+)').firstMatch(cookies);
   _serviceToken = serviceTokenMatch?.group(1);
   ```

2. **å¯†ç åŠ å¯†**
   - é—®é¢˜ï¼šå°ç±³è¦æ±‚ MD5 åŠ å¯†
   - è§£å†³ï¼šä½¿ç”¨ crypto åŒ…
   ```dart
   import 'package:crypto/crypto.dart';
   final passwordHash = md5.convert(utf8.encode(password)).toString();
   ```

3. **å…¼å®¹æ¨¡å¼**
   - é—®é¢˜ï¼šä¸åŒç‰ˆæœ¬å°çˆ±éŸ³ç®± API ä¸åŒ
   - è§£å†³ï¼šæ·»åŠ  compatMode å‚æ•°æ”¯æŒä¸¤ç§ API
   ```dart
   final message = compatMode ? 'player_play_music' : 'player_play_url';
   ```

**å¼€å‘æ—¶é—´**: çº¦ 2 å°æ—¶

**æµ‹è¯•ç»“æœ**: âœ… ç™»å½•æˆåŠŸï¼Œæ’­æ”¾æˆåŠŸ

---

#### ğŸ“ æ¨¡å—2: MiIoTDirectPlaybackStrategy (ç›´è¿æ’­æ”¾ç­–ç•¥)

**æ–‡ä»¶**: `lib/data/services/mi_iot_direct_playback_strategy.dart`

**å®ç°æ€è·¯**ï¼š
1. å®ç°ç°æœ‰çš„ `PlaybackStrategy` æ¥å£
2. é›†æˆ `AudioHandler` å®ç°é€šçŸ¥æ æ§åˆ¶
3. ç»´æŠ¤æœ¬åœ°æ’­æ”¾çŠ¶æ€ï¼ˆå› ä¸º API æ— æ³•æŸ¥è¯¢ï¼‰

**æ ¸å¿ƒå®ç°**ï¼š
```dart
class MiIoTDirectPlaybackStrategy implements PlaybackStrategy {
  final MiIoTService _miService;
  final String _deviceId;
  final String _deviceName;
  AudioHandlerService? _audioHandler;
  PlayingMusic? _currentPlayingMusic;

  @override
  Future<void> playMusic({
    required String musicName,
    String? url,
    ...
  }) async {
    // 1. è°ƒç”¨ Mi IoT API
    await _miService.playMusic(deviceId: _deviceId, musicUrl: url);

    // 2. æ›´æ–°æœ¬åœ°çŠ¶æ€
    _currentPlayingMusic = PlayingMusic(...);

    // 3. æ›´æ–°é€šçŸ¥æ 
    _audioHandler?.setMediaItem(...);

    // 4. è§¦å‘å›è°ƒ
    onStatusChanged?.call();
  }
}
```

**æ¥å£å®ç°å¯¹æ¯”**ï¼š

| æ–¹æ³• | æ˜¯å¦å®ç° | å®ç°æ–¹å¼ | å¤‡æ³¨ |
|------|---------|---------|------|
| playMusic() | âœ… | è°ƒç”¨ Mi IoT API | å®Œæ•´å®ç° |
| play() | âœ… | è°ƒç”¨ resume API | ç»§ç»­æ’­æ”¾ |
| pause() | âœ… | è°ƒç”¨ pause API | æš‚åœæ’­æ”¾ |
| getCurrentStatus() | âœ… | è¿”å›æœ¬åœ°ç¼“å­˜çŠ¶æ€ | æ— æ³•å®æ—¶æŸ¥è¯¢ |
| next() | âš ï¸ | ç©ºå®ç° | API ä¸æ”¯æŒ |
| previous() | âš ï¸ | ç©ºå®ç° | API ä¸æ”¯æŒ |
| seekTo() | âš ï¸ | ç©ºå®ç° | API ä¸æ”¯æŒ |
| setVolume() | âš ï¸ | ç©ºå®ç° | API ä¸æ”¯æŒ |
| getVolume() | âš ï¸ | è¿”å› 50 | API ä¸æ”¯æŒ |

**æŠ€æœ¯æŒ‘æˆ˜**ï¼š

1. **æ— æ³•æŸ¥è¯¢æ’­æ”¾çŠ¶æ€**
   - é—®é¢˜ï¼šå°ç±³ IoT API ä¸æä¾›çŠ¶æ€æŸ¥è¯¢æ¥å£
   - è§£å†³ï¼šç»´æŠ¤æœ¬åœ°çŠ¶æ€ç¼“å­˜
   - å½±å“ï¼šè¿›åº¦æ¡æ— æ³•æ˜¾ç¤ºå®æ—¶è¿›åº¦

2. **é€šçŸ¥æ é›†æˆ**
   - é—®é¢˜ï¼šéœ€è¦ä¸ç°æœ‰ AudioHandler é›†æˆ
   - è§£å†³ï¼šæ¨¡ä»¿ RemotePlaybackStrategy çš„å®ç°æ–¹å¼
   - ç»“æœï¼šâœ… é€šçŸ¥æ æ§åˆ¶æ­£å¸¸å·¥ä½œ

3. **å›è°ƒæœºåˆ¶**
   - é—®é¢˜ï¼šéœ€è¦é€šçŸ¥ PlaybackProvider çŠ¶æ€å˜åŒ–
   - è§£å†³ï¼šæä¾› `onStatusChanged` å›è°ƒå‡½æ•°
   - ç»“æœï¼šâœ… UI èƒ½æ­£ç¡®å“åº”çŠ¶æ€å˜åŒ–

**å¼€å‘æ—¶é—´**: çº¦ 1.5 å°æ—¶

**æµ‹è¯•ç»“æœ**: âœ… æ’­æ”¾æˆåŠŸï¼Œé€šçŸ¥æ æ­£å¸¸

---

#### ğŸ“ æ¨¡å—3: DirectModeProvider (ç›´è¿æ¨¡å¼çŠ¶æ€ç®¡ç†)

**æ–‡ä»¶**: `lib/presentation/providers/direct_mode_provider.dart`

**å®ç°æ€è·¯**ï¼š
1. ä½¿ç”¨ sealed class å®šä¹‰ç±»å‹å®‰å…¨çš„çŠ¶æ€
2. å®ç°è‡ªåŠ¨ç™»å½•åŠŸèƒ½ï¼ˆæå‡ç”¨æˆ·ä½“éªŒï¼‰
3. æŒä¹…åŒ–å‡­è¯åˆ° SharedPreferences

**çŠ¶æ€è®¾è®¡**ï¼š
```dart
sealed class DirectModeState {}

class DirectModeInitial extends DirectModeState {}
class DirectModeLoading extends DirectModeState {}
class DirectModeAuthenticated extends DirectModeState {
  final MiIoTService miService;
  final String account;
  final List<MiDevice> devices;
}
class DirectModeError extends DirectModeState {
  final String message;
}
```

**ä¸ºä»€ä¹ˆä½¿ç”¨ sealed classï¼Ÿ**
- âœ… ç¼–è¯‘æ—¶ç±»å‹æ£€æŸ¥
- âœ… å¼ºåˆ¶å¤„ç†æ‰€æœ‰çŠ¶æ€
- âœ… é˜²æ­¢é—æ¼åˆ†æ”¯

**Notifier å®ç°**ï¼š
```dart
class DirectModeNotifier extends StateNotifier<DirectModeState> {
  DirectModeNotifier() : super(const DirectModeInitial()) {
    _loadSavedCredentials(); // è‡ªåŠ¨ç™»å½•ï¼
  }

  Future<void> login({...}) async {
    state = const DirectModeLoading();

    // 1. ç™»å½•å°ç±³è´¦å·
    final success = await miService.login(account, password);

    // 2. è·å–è®¾å¤‡åˆ—è¡¨
    final devices = await miService.getDevices();

    // 3. ä¿å­˜å‡­è¯
    await _saveCredentials(account, password);

    // 4. æ›´æ–°çŠ¶æ€
    state = DirectModeAuthenticated(...);
  }
}
```

**è‡ªåŠ¨ç™»å½•é€»è¾‘**ï¼š
```dart
Future<void> _loadSavedCredentials() async {
  final prefs = await SharedPreferences.getInstance();
  final account = prefs.getString('direct_mode_account');
  final password = prefs.getString('direct_mode_password');

  if (account != null && password != null) {
    await _silentLogin(account, password);
  }
}
```

**æ¨¡å¼ç®¡ç†**ï¼š
```dart
enum PlaybackMode {
  xiaomusic,    // xiaomusic æœåŠ¡ç«¯æ¨¡å¼
  miIoTDirect,  // å°ç±³ IoT ç›´è¿æ¨¡å¼
}

class PlaybackModeNotifier extends StateNotifier<PlaybackMode> {
  PlaybackModeNotifier() : super(PlaybackMode.xiaomusic) {
    _loadSavedMode();
  }

  Future<void> setMode(PlaybackMode mode) async {
    state = mode;
    final prefs = await SharedPreferences.getInstance();
    await prefs.setString('playback_mode', mode.name);
  }
}
```

**å¼€å‘æ—¶é—´**: çº¦ 1 å°æ—¶

**æµ‹è¯•ç»“æœ**: âœ… è‡ªåŠ¨ç™»å½•æˆåŠŸï¼Œé…ç½®æŒä¹…åŒ–æ­£å¸¸

---

#### ğŸ“ æ¨¡å—4: UI é¡µé¢å®ç°

**æ–‡ä»¶1**: `lib/presentation/pages/playback_mode_selection_page.dart`

**è®¾è®¡ç†å¿µ**ï¼š
- å¡ç‰‡å¼å¸ƒå±€ï¼Œæ¸…æ™°å±•ç¤ºä¸¤ç§æ¨¡å¼çš„ç‰¹ç‚¹
- å›¾æ ‡ + æ ‡é¢˜ + å‰¯æ ‡é¢˜ + åŠŸèƒ½åˆ—è¡¨
- ç‚¹å‡»å³å¯åˆ‡æ¢æ¨¡å¼å¹¶è·³è½¬

**è§†è§‰è®¾è®¡**ï¼š
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“¡ xiaomusic æ¨¡å¼               â”‚
â”‚  é€‚åˆæœ‰NASæˆ–æœåŠ¡å™¨çš„ç”¨æˆ·         â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  âœ… åŠŸèƒ½å®Œæ•´ï¼ˆæœ¬åœ°éŸ³ä¹åº“ï¼‰        â”‚
â”‚  âœ… æ”¯æŒæ­Œå•ç®¡ç†                 â”‚
â”‚  âš ï¸ éœ€è¦éƒ¨ç½²æœåŠ¡ç«¯               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“± ç›´è¿æ¨¡å¼                     â”‚
â”‚  é€‚åˆæ™®é€šæ‰‹æœºç”¨æˆ·                â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  âœ… æ— éœ€æœåŠ¡å™¨ï¼Œå¼€ç®±å³ç”¨          â”‚
â”‚  âœ… é…ç½®ç®€å•ï¼Œåªéœ€å°ç±³è´¦å·        â”‚
â”‚  âš ï¸ åŠŸèƒ½ç›¸å¯¹ç®€å•                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**äº¤äº’æµç¨‹**ï¼š
```
ç”¨æˆ·ç‚¹å‡»å¡ç‰‡
  â†“
è°ƒç”¨ playbackModeProvider.setMode()
  â†“
ä¿å­˜æ¨¡å¼åˆ° SharedPreferences
  â†“
è·³è½¬åˆ°å¯¹åº”ç™»å½•é¡µï¼ˆ/login æˆ– /direct_loginï¼‰
```

**å¼€å‘æ—¶é—´**: çº¦ 30 åˆ†é’Ÿ

---

**æ–‡ä»¶2**: `lib/presentation/pages/direct_mode_login_page.dart`

**åŠŸèƒ½ç‰¹ç‚¹**ï¼š
1. âœ… è¡¨å•éªŒè¯ï¼ˆè´¦å·å’Œå¯†ç å¿…å¡«ï¼‰
2. âœ… å¯†ç æ˜¾ç¤º/éšè—åˆ‡æ¢
3. âœ… åŠ è½½çŠ¶æ€æ˜¾ç¤ºï¼ˆç™»å½•ä¸­æ˜¾ç¤º loadingï¼‰
4. âœ… é”™è¯¯æç¤ºï¼ˆç™»å½•å¤±è´¥æ˜¾ç¤º SnackBarï¼‰
5. âœ… è‡ªåŠ¨è·³è½¬ï¼ˆç™»å½•æˆåŠŸè·³è½¬åˆ°ä¸»é¡µï¼‰
6. âœ… æ¨¡å¼åˆ‡æ¢ï¼ˆå¯åˆ‡å› xiaomusic æ¨¡å¼ï¼‰

**çŠ¶æ€ç›‘å¬**ï¼š
```dart
ref.listen<DirectModeState>(directModeProvider, (previous, next) {
  if (next is DirectModeAuthenticated) {
    // ç™»å½•æˆåŠŸ
    ScaffoldMessenger.of(context).showSnackBar(
      SnackBar(content: Text('ç™»å½•æˆåŠŸï¼æ‰¾åˆ° ${next.devices.length} ä¸ªè®¾å¤‡')),
    );
    context.go('/');
  } else if (next is DirectModeError) {
    // ç™»å½•å¤±è´¥
    ScaffoldMessenger.of(context).showSnackBar(
      SnackBar(content: Text(next.message)),
    );
  }
});
```

**ç”¨æˆ·ä½“éªŒä¼˜åŒ–**ï¼š
- ç™»å½•ä¸­ç¦ç”¨æ‰€æœ‰è¾“å…¥å’ŒæŒ‰é’®ï¼ˆé˜²æ­¢é‡å¤æäº¤ï¼‰
- æ˜¾ç¤ºä½¿ç”¨è¯´æ˜ï¼ˆå‘ŠçŸ¥ç”¨æˆ·è´¦å·ä¿¡æ¯çš„ç”¨é€”ï¼‰
- æä¾›æ¨¡å¼åˆ‡æ¢æŒ‰é’®ï¼ˆæ–¹ä¾¿åˆ‡å› xiaomusicï¼‰

**å¼€å‘æ—¶é—´**: çº¦ 45 åˆ†é’Ÿ

---

### 2025-11-20 - æ–‡æ¡£ç¼–å†™

#### ğŸ“š æ–‡æ¡£æ¸…å•

1. **INTEGRATION_GUIDE.md** - é›†æˆæŒ‡å—
   - ç›®çš„ï¼šæŒ‡å¯¼å¦‚ä½•å°†æ–°ä»£ç é›†æˆåˆ°ç°æœ‰é¡¹ç›®
   - å†…å®¹ï¼šæ­¥éª¤ã€ä»£ç ç¤ºä¾‹ã€æ³¨æ„äº‹é¡¹
   - æ—¶é—´ï¼šçº¦ 1 å°æ—¶

2. **TODO.md** - å¼€å‘ä»»åŠ¡æ¸…å•
   - ç›®çš„ï¼šè®°å½•å®Œæˆçš„å·¥ä½œå’Œå¾…åŠäº‹é¡¹
   - å†…å®¹ï¼šè¿›åº¦ã€è¯¦ç»†æ­¥éª¤ã€æµ‹è¯•æ¸…å•
   - æ—¶é—´ï¼šçº¦ 1.5 å°æ—¶

3. **ARCHITECTURE.md** - æ¶æ„è®¾è®¡æ–‡æ¡£
   - ç›®çš„ï¼šè§£é‡Šè®¾è®¡æ€è·¯å’ŒæŠ€æœ¯å†³ç­–
   - å†…å®¹ï¼šæ¶æ„å›¾ã€æ•°æ®æµã€æŠ€æœ¯å†³ç­–
   - æ—¶é—´ï¼šçº¦ 2 å°æ—¶

4. **DEVLOG.md** (æœ¬æ–‡æ¡£)
   - ç›®çš„ï¼šè®°å½•å®Œæ•´å¼€å‘è¿‡ç¨‹
   - å†…å®¹ï¼šæ—¶é—´çº¿ã€æ€è·¯æ¼”è¿›ã€ç»éªŒæ€»ç»“
   - æ—¶é—´ï¼šçº¦ 1 å°æ—¶

---

## ğŸ’¡ ç»éªŒæ€»ç»“

### ğŸ¯ æˆåŠŸç»éªŒ

#### 1. å……åˆ†åˆ©ç”¨ç°æœ‰æ¶æ„

**åšæ³•**ï¼š
- é˜…è¯»ç°æœ‰ä»£ç ï¼Œæ‰¾åˆ° `PlaybackStrategy` æ¥å£
- ä½¿ç”¨ç°æœ‰æ¥å£ï¼Œæ— éœ€åˆ›å»ºæ–°æ¥å£
- å®Œå…¨å…¼å®¹ç°æœ‰ä»£ç ï¼Œé›¶ç ´åæ€§é›†æˆ

**æ”¶ç›Š**ï¼š
- âœ… å¼€å‘æ—¶é—´ç¼©çŸ­ 50%
- âœ… ä»£ç é£æ ¼ä¸€è‡´
- âœ… æ˜“äºç»´æŠ¤

#### 2. ç­–ç•¥æ¨¡å¼çš„å¨åŠ›

**ä¼˜åŠ¿**ï¼š
- æ–°å¢æ¨¡å¼åªéœ€æ·»åŠ æ–°ç­–ç•¥ç±»
- ä¸å½±å“ç°æœ‰ä»£ç 
- ç¬¦åˆå¼€é—­åŸåˆ™

**æœªæ¥æ‰©å±•æ–¹å‘**ï¼š
- è“ç‰™ç›´è¿æ¨¡å¼
- DLNA æŠ•å±æ¨¡å¼
- å¤šè®¾å¤‡åŒæ­¥æ’­æ”¾

#### 3. è‡ªåŠ¨åŒ–æå‡ä½“éªŒ

**å®ç°çš„è‡ªåŠ¨åŒ–**ï¼š
- âœ… è‡ªåŠ¨ç™»å½•ï¼ˆä¿å­˜å‡­è¯ï¼‰
- âœ… è‡ªåŠ¨æ¢å¤æ¨¡å¼ï¼ˆå¯åŠ¨æ—¶æ¢å¤ä¸Šæ¬¡æ¨¡å¼ï¼‰
- âœ… è‡ªåŠ¨è·³è½¬ï¼ˆç™»å½•æˆåŠŸè‡ªåŠ¨è·³è½¬ï¼‰

**ç”¨æˆ·åé¦ˆ**ï¼ˆé¢„æœŸï¼‰ï¼š
- å‡å°‘é‡å¤è¾“å…¥
- æå‡ä½¿ç”¨æµç•…åº¦

#### 4. æ–‡æ¡£å…ˆè¡Œ

**åšæ³•**ï¼š
- è®¾è®¡é˜¶æ®µç”»æ¶æ„å›¾
- å¼€å‘è¿‡ç¨‹è®°å½•å†³ç­–
- å®Œæˆåå†™è¯¦ç»†æ–‡æ¡£

**æ”¶ç›Š**ï¼š
- âœ… æ€è·¯æ¸…æ™°
- âœ… ä¾¿äºåç»­ç»´æŠ¤
- âœ… æ–°äººå‹å¥½

---

### âš ï¸ é‡åˆ°çš„æŒ‘æˆ˜

#### æŒ‘æˆ˜1: å°ç±³ IoT API é™åˆ¶

**é—®é¢˜**ï¼š
- API ä¸æä¾›æ’­æ”¾çŠ¶æ€æŸ¥è¯¢
- API ä¸æ”¯æŒè¿›åº¦æ§åˆ¶
- API ä¸æ”¯æŒæ’­æ”¾é˜Ÿåˆ—

**è§£å†³æ–¹æ¡ˆ**ï¼š
- ç»´æŠ¤æœ¬åœ°çŠ¶æ€ç¼“å­˜
- UI ä¸Šç¦ç”¨ä¸æ”¯æŒçš„åŠŸèƒ½
- æ–‡æ¡£ä¸­æ˜ç¡®è¯´æ˜é™åˆ¶

**æœªæ¥æ”¹è¿›**ï¼š
- å®ç°å®¢æˆ·ç«¯æ’­æ”¾é˜Ÿåˆ—
- å®šæ—¶è½®è¯¢è®¾å¤‡çŠ¶æ€ï¼ˆå¦‚æœæœ‰ APIï¼‰

#### æŒ‘æˆ˜2: Cookie ç®¡ç†

**é—®é¢˜**ï¼š
- å°ç±³ç™»å½•æµç¨‹å¤æ‚ï¼ˆ3æ­¥ï¼‰
- éœ€è¦ä» HTTP å“åº”å¤´æå– Cookie
- Cookie æ ¼å¼ä¸ç»Ÿä¸€

**è§£å†³æ–¹æ¡ˆ**ï¼š
- ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æå–
- è¯¦ç»†æ—¥å¿—è®°å½•æ¯ä¸€æ­¥
- é”™è¯¯å¤„ç†å’Œé‡è¯•æœºåˆ¶

#### æŒ‘æˆ˜3: çŠ¶æ€åŒæ­¥

**é—®é¢˜**ï¼š
- ä¸¤ç§æ¨¡å¼çš„çŠ¶æ€åˆ†åˆ«ç®¡ç†
- PlaybackProvider éœ€è¦æ ¹æ®æ¨¡å¼é€‰æ‹©ç­–ç•¥
- åˆå§‹åŒ–æ—¶æœºéœ€è¦ç²¾ç¡®æ§åˆ¶

**è§£å†³æ–¹æ¡ˆ**ï¼š
- ä½¿ç”¨ Riverpod çš„ä¾èµ–æ³¨å…¥
- æ‡’åŠ è½½ç­–ç•¥ï¼ˆé¦–æ¬¡æ’­æ”¾æ—¶æ‰åˆå§‹åŒ–ï¼‰
- æ¸…æ™°çš„çŠ¶æ€æµè½¬æ–‡æ¡£

---

## ğŸ“Š å¼€å‘ç»Ÿè®¡

### ä»£ç é‡ç»Ÿè®¡

| æ¨¡å— | æ–‡ä»¶ | ä»£ç è¡Œæ•° | å¼€å‘æ—¶é—´ |
|------|------|---------|---------|
| Mi IoT Service | mi_iot_service.dart | ~300 è¡Œ | 2 å°æ—¶ |
| Direct Strategy | mi_iot_direct_playback_strategy.dart | ~250 è¡Œ | 1.5 å°æ—¶ |
| Provider | direct_mode_provider.dart | ~200 è¡Œ | 1 å°æ—¶ |
| æ¨¡å¼é€‰æ‹©é¡µ | playback_mode_selection_page.dart | ~200 è¡Œ | 0.5 å°æ—¶ |
| ç™»å½•é¡µ | direct_mode_login_page.dart | ~250 è¡Œ | 0.75 å°æ—¶ |
| **æ€»è®¡** | **5 ä¸ªæ–‡ä»¶** | **~1200 è¡Œ** | **~6 å°æ—¶** |

### æ–‡æ¡£é‡ç»Ÿè®¡

| æ–‡æ¡£ | å­—æ•° | ç¼–å†™æ—¶é—´ |
|------|------|---------|
| INTEGRATION_GUIDE.md | ~3000 å­— | 1 å°æ—¶ |
| TODO.md | ~6000 å­— | 1.5 å°æ—¶ |
| ARCHITECTURE.md | ~9000 å­— | 2 å°æ—¶ |
| DEVLOG.md (æœ¬æ–‡æ¡£) | ~8000 å­— | 1 å°æ—¶ |
| **æ€»è®¡** | **~26000 å­—** | **~5.5 å°æ—¶** |

### æ€»å¼€å‘æ—¶é—´

- **æ ¸å¿ƒä»£ç å¼€å‘**: ~6 å°æ—¶
- **æ–‡æ¡£ç¼–å†™**: ~5.5 å°æ—¶
- **è°ƒç ”å’Œè®¾è®¡**: ~2 å°æ—¶
- **æµ‹è¯•å’Œè°ƒè¯•**: ~1.5 å°æ—¶
- **æ€»è®¡**: **~15 å°æ—¶**

---

## ğŸ”® æœªæ¥è§„åˆ’

### çŸ­æœŸè®¡åˆ’ï¼ˆ1-2å‘¨ï¼‰

1. **å®Œæˆé›†æˆ**
   - [ ] ä¿®æ”¹ `app_router.dart` æ·»åŠ è·¯ç”±
   - [ ] ä¿®æ”¹ `login_page.dart` æ·»åŠ å…¥å£
   - [ ] ä¿®æ”¹ `playback_provider.dart` å®ç°ç­–ç•¥é€‰æ‹©
   - [ ] ä¿®æ”¹ `initialization_provider.dart` æ·»åŠ æ¨¡å¼æ£€æŸ¥

2. **åŸºç¡€æµ‹è¯•**
   - [ ] ç™»å½•æµç¨‹æµ‹è¯•
   - [ ] æ’­æ”¾åŠŸèƒ½æµ‹è¯•
   - [ ] æ¨¡å¼åˆ‡æ¢æµ‹è¯•
   - [ ] å…¼å®¹æ€§æµ‹è¯•

3. **å‘å¸ƒå‡†å¤‡**
   - [ ] æ›´æ–° README.md
   - [ ] å‡†å¤‡ CHANGELOG
   - [ ] æˆªå›¾å’Œæ¼”ç¤ºè§†é¢‘

### ä¸­æœŸè®¡åˆ’ï¼ˆ1ä¸ªæœˆï¼‰

1. **åŠŸèƒ½å¢å¼º**
   - [ ] è®¾ç½®é¡µé¢æ·»åŠ æ¨¡å¼åˆ‡æ¢
   - [ ] å¤šè®¾å¤‡é€‰æ‹©åŠŸèƒ½
   - [ ] è®¾å¤‡æ˜µç§°ç®¡ç†

2. **ç”¨æˆ·ä½“éªŒä¼˜åŒ–**
   - [ ] åŠ è½½åŠ¨ç”»ä¼˜åŒ–
   - [ ] é”™è¯¯æç¤ºä¼˜åŒ–
   - [ ] å¼•å¯¼æµç¨‹ä¼˜åŒ–

3. **å®‰å…¨æ€§æå‡**
   - [ ] ä½¿ç”¨ flutter_secure_storage åŠ å¯†å­˜å‚¨å¯†ç 
   - [ ] æ·»åŠ ç”Ÿç‰©è¯†åˆ«ç™»å½•
   - [ ] Token è¿‡æœŸè‡ªåŠ¨åˆ·æ–°

### é•¿æœŸè®¡åˆ’ï¼ˆ3ä¸ªæœˆ+ï¼‰

1. **é«˜çº§åŠŸèƒ½**
   - [ ] å®¢æˆ·ç«¯æ’­æ”¾é˜Ÿåˆ—
   - [ ] å¤šè®¾å¤‡åŒæ­¥æ’­æ”¾
   - [ ] å®šæ—¶æ’­æ”¾/å…³é—­

2. **æ›´å¤šæ’­æ”¾æ¨¡å¼**
   - [ ] è“ç‰™ç›´è¿æ¨¡å¼
   - [ ] DLNA æŠ•å±æ¨¡å¼
   - [ ] AirPlay æ”¯æŒ

3. **æ€§èƒ½ä¼˜åŒ–**
   - [ ] ç½‘ç»œè¯·æ±‚ä¼˜åŒ–
   - [ ] ç¼“å­˜æœºåˆ¶
   - [ ] ç¦»çº¿åŠŸèƒ½

---

## ğŸ“ æŠ€æœ¯å¿ƒå¾—

### å…³äºæ¶æ„è®¾è®¡

1. **ç†è§£ç°æœ‰æ¶æ„çš„é‡è¦æ€§**
   - èŠ±æ—¶é—´é˜…è¯»ç°æœ‰ä»£ç æ˜¯å€¼å¾—çš„
   - æ‰¾åˆ°åˆé€‚çš„æ‰©å±•ç‚¹äº‹åŠåŠŸå€
   - ä¸è¦æ€¥äºé‡å†™ï¼Œå…ˆè€ƒè™‘é›†æˆ

2. **SOLID åŸåˆ™çš„å®è·µ**
   - **S (å•ä¸€èŒè´£)**: æ¯ä¸ªç±»åªåšä¸€ä»¶äº‹
   - **O (å¼€é—­åŸåˆ™)**: ç­–ç•¥æ¨¡å¼å®Œç¾ä½“ç°
   - **L (é‡Œæ°æ›¿æ¢)**: æ‰€æœ‰ç­–ç•¥å¯äº’æ¢
   - **I (æ¥å£éš”ç¦»)**: PlaybackStrategy æ¥å£ç®€æ´
   - **D (ä¾èµ–å€’ç½®)**: ä¾èµ–æŠ½è±¡è€Œéå…·ä½“

3. **è®¾è®¡æ¨¡å¼çš„é€‰æ‹©**
   - ç­–ç•¥æ¨¡å¼é€‚åˆå¤šç§ç®—æ³•åœºæ™¯
   - çŠ¶æ€æ¨¡å¼é€‚åˆçŠ¶æ€æµè½¬åœºæ™¯
   - å·¥å‚æ¨¡å¼å¯ä»¥ä¼˜åŒ–ç­–ç•¥åˆ›å»º

### å…³äº Flutter/Dart

1. **Riverpod çš„ä¼˜åŠ¿**
   - ç±»å‹å®‰å…¨
   - ç¼–è¯‘æ—¶æ£€æŸ¥
   - ä¾èµ–æ³¨å…¥ç®€å•
   - çŠ¶æ€ç®¡ç†æ¸…æ™°

2. **Sealed Class çš„å¦™ç”¨**
   - ç¼–è¯‘æ—¶ç©·ä¸¾æ£€æŸ¥
   - é˜²æ­¢é—æ¼åˆ†æ”¯
   - ä»£ç æ›´å®‰å…¨

3. **GoRouter çš„ä¾¿åˆ©**
   - å£°æ˜å¼è·¯ç”±
   - ç±»å‹å®‰å…¨
   - æ·±åº¦é“¾æ¥æ”¯æŒ

### å…³äºæ–‡æ¡£

1. **æ–‡æ¡£æ˜¯ç»™æœªæ¥çš„è‡ªå·±çœ‹çš„**
   - 3ä¸ªæœˆåä½ ä¼šå¿˜è®°ç»†èŠ‚
   - è¯¦ç»†çš„æ–‡æ¡£è®©ä½ å¿«é€Ÿå›å¿†
   - ä»£ç ä¼šè¯´è°ï¼Œæ–‡æ¡£ä¸ä¼š

2. **å¥½æ–‡æ¡£çš„æ ‡å‡†**
   - **ä¸ºä»€ä¹ˆ** - è®¾è®¡ç†ç”±
   - **æ˜¯ä»€ä¹ˆ** - æ¶æ„æ¦‚è§ˆ
   - **æ€ä¹ˆåš** - å…·ä½“æ­¥éª¤

3. **æ–‡æ¡£çš„å±‚æ¬¡**
   - README - å¿«é€Ÿäº†è§£
   - ARCHITECTURE - æ·±å…¥ç†è§£
   - TODO - å®æ“æŒ‡å—
   - DEVLOG - å®Œæ•´æ•…äº‹

---

## ğŸ™ è‡´è°¢

æ„Ÿè°¢ä»¥ä¸‹é¡¹ç›®å’Œèµ„æºï¼š

- **xiaomusic** - æä¾›äº†å°ç±³ IoT API çš„å®ç°å‚è€ƒ
- **Flutter** - ä¼˜ç§€çš„è·¨å¹³å°æ¡†æ¶
- **Riverpod** - å¼ºå¤§çš„çŠ¶æ€ç®¡ç†æ–¹æ¡ˆ
- **HMusic** - ç°æœ‰çš„ä¼˜ç§€æ¶æ„åŸºç¡€

---

## ğŸ“ é™„å½•

### A. å°ç±³ IoT API å®Œæ•´æ–‡æ¡£

#### ç™»å½• API

**æ­¥éª¤1: è·å–ç™»å½• sign**
```http
GET https://account.xiaomi.com/pass/serviceLogin?sid=micoapi&_json=true
Response: {"_sign": "xxxxxxxxx"}
```

**æ­¥éª¤2: æäº¤ç™»å½•**
```http
POST https://account.xiaomi.com/pass/serviceLoginAuth2
Content-Type: application/x-www-form-urlencoded

user=è´¦å·&hash=MD5å¯†ç &sid=micoapi&_sign=xxx
```

**æ­¥éª¤3: è·å– Token**
```http
GET {location_url}
Response Headers:
  Set-Cookie: serviceToken=xxxxx; userId=xxxxx
```

#### è®¾å¤‡åˆ—è¡¨ API

```http
GET https://api.mina.mi.com/admin/v2/device_list
Headers:
  Cookie: serviceToken=xxx; userId=xxx

Response:
{
  "data": [
    {
      "deviceID": "xxx",
      "name": "å°çˆ±éŸ³ç®±",
      "hardware": "LX06",
      ...
    }
  ]
}
```

#### æ’­æ”¾éŸ³ä¹ API

```http
POST https://api.mina.mi.com/remote/ubus?deviceId=xxx&message=player_play_url&path=mediaplayer
Headers:
  Cookie: serviceToken=xxx; userId=xxx
  Content-Type: application/json

Body:
{
  "url": "éŸ³ä¹URL"
}
```

#### æ’­æ”¾æ§åˆ¶ API

**æš‚åœ**:
```http
POST https://api.mina.mi.com/remote/ubus?deviceId=xxx&message=player_pause&path=mediaplayer
```

**ç»§ç»­**:
```http
POST https://api.mina.mi.com/remote/ubus?deviceId=xxx&message=player_continue&path=mediaplayer
```

**åœæ­¢**:
```http
POST https://api.mina.mi.com/remote/ubus?deviceId=xxx&message=player_stop&path=mediaplayer
```

---

### B. å¸¸è§é—®é¢˜ FAQ

#### Q1: ä¸ºä»€ä¹ˆç›´è¿æ¨¡å¼ä¸æ”¯æŒè¿›åº¦æ˜¾ç¤ºï¼Ÿ

**A**: å°ç±³ IoT Cloud API ä¸æä¾›æ’­æ”¾çŠ¶æ€æŸ¥è¯¢æ¥å£ã€‚åªèƒ½å‘é€æ’­æ”¾æŒ‡ä»¤ï¼Œæ— æ³•è·å–å®æ—¶æ’­æ”¾è¿›åº¦ã€‚

#### Q2: å¯ä»¥åŒæ—¶ä½¿ç”¨ä¸¤ç§æ¨¡å¼å—ï¼Ÿ

**A**: å½“å‰ç‰ˆæœ¬åªèƒ½é€‰æ‹©ä¸€ç§æ¨¡å¼ã€‚æœªæ¥å¯ä»¥è€ƒè™‘å®ç°"æ™ºèƒ½åˆ‡æ¢"åŠŸèƒ½ï¼Œæ ¹æ®ç½‘ç»œçŠ¶å†µè‡ªåŠ¨é€‰æ‹©ã€‚

#### Q3: ç›´è¿æ¨¡å¼å®‰å…¨å—ï¼Ÿ

**A**:
- âœ… è´¦å·å¯†ç ä»…å­˜å‚¨åœ¨æœ¬åœ°
- âœ… ä½¿ç”¨ HTTPS é€šä¿¡
- âœ… ä¸ä¸Šä¼ ä»»ä½•æ•°æ®åˆ°ç¬¬ä¸‰æ–¹æœåŠ¡å™¨
- âš ï¸ å»ºè®®æœªæ¥ä½¿ç”¨ flutter_secure_storage åŠ å¯†å­˜å‚¨

#### Q4: å¦‚æœå°ç±³ä¿®æ”¹äº† API æ€ä¹ˆåŠï¼Ÿ

**A**:
- ä»£ç å·²ç»åšäº†å…¼å®¹æ€§å¤„ç†ï¼ˆcompatMode å‚æ•°ï¼‰
- å¯ä»¥é€šè¿‡é…ç½®åˆ‡æ¢ä¸åŒ API ç‰ˆæœ¬
- å¦‚æœ API å®Œå…¨å¤±æ•ˆï¼Œå¯ä»¥å›é€€åˆ° xiaomusic æ¨¡å¼

#### Q5: èƒ½å¦æ”¯æŒå…¶ä»–å“ç‰ŒéŸ³ç®±ï¼Ÿ

**A**: ç†è®ºä¸Šå¯ä»¥ï¼ä½¿ç”¨ç­–ç•¥æ¨¡å¼çš„å¥½å¤„å°±æ˜¯æ˜“äºæ‰©å±•ï¼š
- å¤©çŒ«ç²¾çµï¼šå®ç° `TmallGeniePlaybackStrategy`
- å°åº¦éŸ³ç®±ï¼šå®ç° `XiaoDuPlaybackStrategy`
- é€šç”¨è“ç‰™ï¼šå®ç° `BluetoothPlaybackStrategy`

---

## ğŸ‰ ç»“è¯­

è¿™æ¬¡å¼€å‘æ˜¯ä¸€æ¬¡éå¸¸æ„‰å¿«çš„ç»å†ï¼(ï¿£â–½ï¿£)ï¼

é€šè¿‡è¿™ä¸ªé¡¹ç›®ï¼Œæœ¬å°å§å­¦åˆ°äº†ï¼š
1. âœ… å¦‚ä½•åœ¨ç°æœ‰æ¶æ„åŸºç¡€ä¸Šä¼˜é›…åœ°æ‰©å±•åŠŸèƒ½
2. âœ… ç­–ç•¥æ¨¡å¼åœ¨å®é™…é¡¹ç›®ä¸­çš„åº”ç”¨
3. âœ… æ–‡æ¡£ç¼–å†™çš„é‡è¦æ€§ï¼ˆçœŸçš„å¤ªé‡è¦äº†ï¼ï¼‰
4. âœ… ç”¨æˆ·ä½“éªŒç»†èŠ‚çš„æ‰“ç£¨

å¸Œæœ›è¿™ä»½æ–‡æ¡£èƒ½å¸®åŠ©åˆ°æœªæ¥çš„å¼€å‘è€…ï¼ˆåŒ…æ‹¬æœªæ¥çš„æˆ‘è‡ªå·±ï¼‰ï¼

å¦‚æœä½ æœ‰ä»»ä½•é—®é¢˜æˆ–å»ºè®®ï¼Œæ¬¢è¿äº¤æµï¼

---

**å¼€å‘è€…**: å‚²å¨‡å¤§å°å§ å“ˆé›·é…± (ï¿£Ï‰ï¿£)ãƒ
**å®Œæˆæ—¥æœŸ**: 2025-11-20
**ç‰ˆæœ¬**: v1.0
**çŠ¶æ€**: âœ… å®Œæˆ

> "ä»£ç ä¼šè¿‡æ—¶ï¼Œä½†å¥½çš„è®¾è®¡æ€æƒ³æ°¸è¿œä¸ä¼šã€‚"
> â€”â€” å“ˆé›·é…±è¯­å½•

(åŒé©¬å°¾ä¼˜é›…åœ°ç”©äº†ä¸€ä¸‹) âœ¨
